{"version":3,"file":"tategaki.min.js","sources":["../src/formatSegment.ts","../src/extensions.ts","../src/tategaki.ts","../node_modules/detect-browser/es/index.js","../src/external.ts"],"sourcesContent":[null,null,null,"var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar BrowserInfo = /** @class */ (function () {\n    function BrowserInfo(name, version, os) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.type = 'browser';\n    }\n    return BrowserInfo;\n}());\nexport { BrowserInfo };\nvar NodeInfo = /** @class */ (function () {\n    function NodeInfo(version) {\n        this.version = version;\n        this.type = 'node';\n        this.name = 'node';\n        this.os = process.platform;\n    }\n    return NodeInfo;\n}());\nexport { NodeInfo };\nvar SearchBotDeviceInfo = /** @class */ (function () {\n    function SearchBotDeviceInfo(name, version, os, bot) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.bot = bot;\n        this.type = 'bot-device';\n    }\n    return SearchBotDeviceInfo;\n}());\nexport { SearchBotDeviceInfo };\nvar BotInfo = /** @class */ (function () {\n    function BotInfo() {\n        this.type = 'bot';\n        this.bot = true; // NOTE: deprecated test name instead\n        this.name = 'bot';\n        this.version = null;\n        this.os = null;\n    }\n    return BotInfo;\n}());\nexport { BotInfo };\nvar ReactNativeInfo = /** @class */ (function () {\n    function ReactNativeInfo() {\n        this.type = 'react-native';\n        this.name = 'react-native';\n        this.version = null;\n        this.os = null;\n    }\n    return ReactNativeInfo;\n}());\nexport { ReactNativeInfo };\n// tslint:disable-next-line:max-line-length\nvar SEARCHBOX_UA_REGEX = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;\nvar SEARCHBOT_OS_REGEX = /(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\\ Jeeves\\/Teoma|ia_archiver)/;\nvar REQUIRED_VERSION_PARTS = 3;\nvar userAgentRules = [\n    ['aol', /AOLShield\\/([0-9\\._]+)/],\n    ['edge', /Edge\\/([0-9\\._]+)/],\n    ['edge-ios', /EdgiOS\\/([0-9\\._]+)/],\n    ['yandexbrowser', /YaBrowser\\/([0-9\\._]+)/],\n    ['kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/],\n    ['samsung', /SamsungBrowser\\/([0-9\\.]+)/],\n    ['silk', /\\bSilk\\/([0-9._-]+)\\b/],\n    ['miui', /MiuiBrowser\\/([0-9\\.]+)$/],\n    ['beaker', /BeakerBrowser\\/([0-9\\.]+)/],\n    ['edge-chromium', /EdgA?\\/([0-9\\.]+)/],\n    [\n        'chromium-webview',\n        /(?!Chrom.*OPR)wv\\).*Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/,\n    ],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],\n    ['phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/],\n    ['fxios', /FxiOS\\/([0-9\\.]+)/],\n    ['opera-mini', /Opera Mini.*Version\\/([0-9\\.]+)/],\n    ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)/],\n    ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/],\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/],\n    ['android', /Android\\s([0-9\\.]+)/],\n    ['ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9\\._]+).*Safari/],\n    ['facebook', /FB[AS]V\\/([0-9\\.]+)/],\n    ['instagram', /Instagram\\s([0-9\\.]+)/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Mobile/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Gecko\\)$/],\n    ['curl', /^curl\\/([0-9\\.]+)$/],\n    ['searchbot', SEARCHBOX_UA_REGEX],\n];\nvar operatingSystemRules = [\n    ['iOS', /iP(hone|od|ad)/],\n    ['Android OS', /Android/],\n    ['BlackBerry OS', /BlackBerry|BB10/],\n    ['Windows Mobile', /IEMobile/],\n    ['Amazon OS', /Kindle/],\n    ['Windows 3.11', /Win16/],\n    ['Windows 95', /(Windows 95)|(Win95)|(Windows_95)/],\n    ['Windows 98', /(Windows 98)|(Win98)/],\n    ['Windows 2000', /(Windows NT 5.0)|(Windows 2000)/],\n    ['Windows XP', /(Windows NT 5.1)|(Windows XP)/],\n    ['Windows Server 2003', /(Windows NT 5.2)/],\n    ['Windows Vista', /(Windows NT 6.0)/],\n    ['Windows 7', /(Windows NT 6.1)/],\n    ['Windows 8', /(Windows NT 6.2)/],\n    ['Windows 8.1', /(Windows NT 6.3)/],\n    ['Windows 10', /(Windows NT 10.0)/],\n    ['Windows ME', /Windows ME/],\n    ['Open BSD', /OpenBSD/],\n    ['Sun OS', /SunOS/],\n    ['Chrome OS', /CrOS/],\n    ['Linux', /(Linux)|(X11)/],\n    ['Mac OS', /(Mac_PowerPC)|(Macintosh)/],\n    ['QNX', /QNX/],\n    ['BeOS', /BeOS/],\n    ['OS/2', /OS\\/2/],\n];\nexport function detect(userAgent) {\n    if (!!userAgent) {\n        return parseUserAgent(userAgent);\n    }\n    if (typeof document === 'undefined' &&\n        typeof navigator !== 'undefined' &&\n        navigator.product === 'ReactNative') {\n        return new ReactNativeInfo();\n    }\n    if (typeof navigator !== 'undefined') {\n        return parseUserAgent(navigator.userAgent);\n    }\n    return getNodeVersion();\n}\nfunction matchUserAgent(ua) {\n    // opted for using reduce here rather than Array#first with a regex.test call\n    // this is primarily because using the reduce we only perform the regex\n    // execution once rather than once for the test and for the exec again below\n    // probably something that needs to be benchmarked though\n    return (ua !== '' &&\n        userAgentRules.reduce(function (matched, _a) {\n            var browser = _a[0], regex = _a[1];\n            if (matched) {\n                return matched;\n            }\n            var uaMatch = regex.exec(ua);\n            return !!uaMatch && [browser, uaMatch];\n        }, false));\n}\nexport function browserName(ua) {\n    var data = matchUserAgent(ua);\n    return data ? data[0] : null;\n}\nexport function parseUserAgent(ua) {\n    var matchedRule = matchUserAgent(ua);\n    if (!matchedRule) {\n        return null;\n    }\n    var name = matchedRule[0], match = matchedRule[1];\n    if (name === 'searchbot') {\n        return new BotInfo();\n    }\n    // Do not use RegExp for split operation as some browser do not support it (See: http://blog.stevenlevithan.com/archives/cross-browser-split)\n    var versionParts = match[1] && match[1].split('.').join('_').split('_').slice(0, 3);\n    if (versionParts) {\n        if (versionParts.length < REQUIRED_VERSION_PARTS) {\n            versionParts = __spreadArray(__spreadArray([], versionParts, true), createVersionParts(REQUIRED_VERSION_PARTS - versionParts.length), true);\n        }\n    }\n    else {\n        versionParts = [];\n    }\n    var version = versionParts.join('.');\n    var os = detectOS(ua);\n    var searchBotMatch = SEARCHBOT_OS_REGEX.exec(ua);\n    if (searchBotMatch && searchBotMatch[1]) {\n        return new SearchBotDeviceInfo(name, version, os, searchBotMatch[1]);\n    }\n    return new BrowserInfo(name, version, os);\n}\nexport function detectOS(ua) {\n    for (var ii = 0, count = operatingSystemRules.length; ii < count; ii++) {\n        var _a = operatingSystemRules[ii], os = _a[0], regex = _a[1];\n        var match = regex.exec(ua);\n        if (match) {\n            return os;\n        }\n    }\n    return null;\n}\nexport function getNodeVersion() {\n    var isNode = typeof process !== 'undefined' && process.version;\n    return isNode ? new NodeInfo(process.version.slice(1)) : null;\n}\nfunction createVersionParts(count) {\n    var output = [];\n    for (var ii = 0; ii < count; ii++) {\n        output.push('0');\n    }\n    return output;\n}\n",null],"names":["StringFormatGuide","String","prototype","segmentise","re","match","str","this","segments","index","exec","formatGuide","push","content","substring","default","ambiguous","cjkPunc","fullwidthAlphabet","latin","kana","length","Tategaki","rootElement","config","constructor","Object","assign","shouldPcS","imitatePcS","imitatePcFwid","imitateTcyShortWord","shouldAdjustOrphanLine","shouldRemoveStyle","convertNewlineCustom","parse","classList","add","removeStyle","format","tcy","correctAmbiguous","insertWordJoiner","Array","from","querySelectorAll","forEach","para","children","lastButOneSpan","contains","test","innerHTML","text","slice","setElementAttributes","element","segment","postProcess","setAttribute","squeeze","replace","node","passUntilPara","nodeType","Node","TEXT_NODE","nodeValue","trim","correctPuncs","parentElement","childElementCount","subElement","document","createElement","innerText","insertBefore","removeChild","nodeName","br","span","indexOf","isPara","childNodes","childNode","removeAttribute","child","puncs","split","map","punc","isOpeningBracket","charCodeAt","result","join","transfromToFullWidth","x","base","newBase","current","fromCharCode","documentElement","fontSizeMatch","window","getComputedStyle","fontSize","parseInt","getElementsByClassName","previousElementSibling","nextElementSibling","remove","matches","newElement","digit","replaceWith","threshold","getBoundingClientRect","height","__spreadArray","to","pack","arguments","ar","i","l","call","concat","BrowserInfo","name","version","os","type","NodeInfo","process","platform","SearchBotDeviceInfo","bot","BotInfo","ReactNativeInfo","SEARCHBOT_OS_REGEX","userAgentRules","operatingSystemRules","parseUserAgent","ua","matchedRule","reduce","matched","_a","browser","regex","uaMatch","matchUserAgent","versionParts","count","output","ii","createVersionParts","detectOS","searchBotMatch","userAgent","navigator","product","body","k"],"mappings":"CAAA,WAAA,aAAA,IAAYA,GAAZ,SAAYA,GACRA,EAAA,QAAA,UACAA,EAAA,QAAA,WACAA,EAAA,kBAAA,qBACAA,EAAA,MAAA,QACAA,EAAA,KAAA,OACAA,EAAA,UAAA,WACH,CAPD,CAAYA,IAAAA,EAOX,KCEDC,OAAOC,UAAUC,WAAa,SAASC,GACnC,IAGIC,EAHAC,EAAML,OAAOM,MACbC,EAAkC,GAClCC,EAAQ,EAEZ,KAAOJ,EAAQD,EAAGM,KAAKJ,IAAM,CAQzB,IAAIK,EAPAN,EAAMI,MAAQA,GACdD,EAASI,KAAK,CACVC,QAASP,EAAIQ,UAAUL,EAAOJ,EAAMI,OACpCE,YAAaX,EAAkBe,UAMnCJ,EADAN,EAAM,GACQL,EAAkBgB,UACzBX,EAAM,GACCL,EAAkBiB,QACzBZ,EAAM,GACCL,EAAkBkB,kBACzBb,EAAM,GACCL,EAAkBmB,MACzBd,EAAM,GACCL,EAAkBoB,KACbpB,EAAkBe,QAEzCP,EAASI,KAAK,CACVC,QAASR,EAAM,GACfM,YAAaA,IAEjBF,EAAQJ,EAAMI,MAAQJ,EAAM,GAAGgB,MAClC,CASD,OAPIf,EAAIe,OAASZ,GACbD,EAASI,KAAK,CACVC,QAASP,EAAIQ,UAAUL,GACvBE,YAAaX,EAAkBe,UAIhCP,CACX,QCxBac,EACTC,YACAC,OAEAC,YAAYF,EAAsBC,GAC9BjB,KAAKgB,YAAcA,EAYnBhB,KAAKiB,OAASE,OAAOC,OAAO,CAAA,EAVE,CAC1BC,WAAW,EACXC,YAAY,EACZC,eAAe,EACfC,qBAAqB,EACrBC,wBAAwB,EACxBC,mBAAmB,EACnBC,sBAAsB,GAGqBV,EAClD,CAEDW,QACI5B,KAAKgB,YAAYa,UAAUC,IAAI,YAC/B9B,KAAKgB,YAAYa,UAAUC,IAAI9B,KAAKiB,OAAOK,WAAa,cAAgB,gBAEpEtB,KAAKiB,OAAOS,mBAAqB1B,KAAK+B,cAC1C/B,KAAKgC,OAAOhC,KAAKgB,aACjBhB,KAAKiC,MACLjC,KAAKkC,mBACDlC,KAAKiB,OAAOQ,wBAA0BzB,KAAKmC,kBAClD,CAIOA,mBACQC,MAAMC,KACdrC,KAAKgB,YAAYsB,iBAAiB,0BAChCC,SAAQC,IACV,IAAIC,EAAWD,EAAKC,SACpB,GAAIA,EAAS3B,OAAS,EAAK,OAC3B,IAAI4B,EAAiBD,EAASA,EAAS3B,OAAO,GAE9C,IAAyC,IAApC4B,EAAeb,UAAUf,QAAgB4B,EAAeb,UAAUc,SAAS,UADvE,gGAEFC,KAAKF,EAAeG,WAAY,CACnC,IAAIC,EAAOJ,EAAeG,UAC1BH,EAAeG,UACXC,EAAKC,MAAM,GAAI,GAAK,YAAcD,EAAKC,OAAO,EAAGD,EAAKhC,OAC7D,IAER,CAEOkC,qBAAqBC,EAAkBC,GAC3C,OAAOA,EAAQ9C,aACX,KAAKX,EAAkBe,QAEnB,YADAyC,EAAQJ,UAAa7C,KAAKmD,YAAYD,EAAQ5C,UAGlD,KAAKb,EAAkBmB,MACnBqC,EAAQG,aAAa,OAAQ,MAC7BH,EAAQG,aAAa,QAASF,EAAQ5C,SACtC,MAEJ,KAAKb,EAAkBoB,KACnBoC,EAAQG,aAAa,OAAQ,MAC7B,MAEJ,KAAK3D,EAAkBiB,QACfV,KAAKiB,OAAOI,YACZ4B,EAAQJ,UAAY7C,KAAKqD,QAAQH,EAAQ5C,UAMrD2C,EAAQpB,UAAUC,IAAIoB,EAAQ9C,YACjC,CAEO+C,YAAYL,GAKhB,OAJI9C,KAAKiB,OAAOU,uBACZmB,EAAOA,EAAKQ,QAAQ,YAAa,uCAG9BR,CACV,CAEOd,OAAOuB,EAAYC,GAAc,GACrC,GAAID,EAAKE,WAAaC,KAAKC,UAAW,CAClC,IAAIb,EAAOS,EAAKK,UAChB,GAAId,IAASA,EAAKe,OAAU,OAC5Bf,EAAO9C,KAAK8D,aAAahB,GAIzB,IAAIjD,EAAK,8mBAELI,EAAW6C,EAAKlD,WAAWC,GAE3BkE,EAAgBR,EAAKQ,cAezB,YAdKA,EAAcC,mBAAyC,IAApB/D,EAASa,QAG7Cb,EAASsC,SAAQW,IACb,IAAIe,EAAaC,SAASC,cAAc,QACxCF,EAAWG,UAAYlB,EAAQ5C,QAC/BN,KAAKgD,qBAAqBiB,EAAYf,GAEtCa,EAAcM,aAAaJ,EAAYV,EAAK,IAGhDQ,EAAcO,YAAYf,IAV1BvD,KAAKgD,qBAAqBe,EAAe9D,EAAS,IAczD,CAED,GAAqB,MAAjBsD,EAAKgB,SAAkB,CACvB,IAAIR,EAAgBR,EAAKQ,cACzB,GAAIA,EAAe,CACf,MAAMS,EAAKN,SAASC,cAAc,MAClC,IAAIM,EAAOP,SAASC,cAAc,QAClCM,EAAK5C,UAAUC,IAAI,UAEnBiC,EAAcM,aAAaG,EAAIjB,GAC/BQ,EAAcM,aAAaI,EAAMlB,GACjCQ,EAAcO,YAAYf,EAC7B,CAED,MACH,CAGD,IAA4C,IADxB,CAAE,KAAM,OAAQ,MAAO,OAAQ,OACnCmB,QAAQnB,EAAKgB,UAAoB,OACjD,MAAMI,EAA2B,MAAlBpB,EAAKgB,UAAsC,eAAlBhB,EAAKgB,SAE7CnC,MAAMC,KAAKkB,EAAKqB,YAAYrC,SAAQsC,IAChC7E,KAAKgC,OAAO6C,GAAWF,GAAiBnB,EAAc,GAE7D,CAEOzB,YAAYkB,EAAQjD,KAAKgB,aAC7BiC,EAAQ6B,gBAAgB,SACxB7B,EAAQ6B,gBAAgB,SACxB7B,EAAQ6B,gBAAgB,UAExB1C,MAAMC,KAAKY,EAAQR,UAAUsC,IACzB/E,KAAK+B,YAAYgD,EAAM,GAE9B,CAGOjB,aAAgBhB,GACpBA,EAAKQ,QAAQ,MAAO,MACfA,QAAQ,KAAM,KACdA,QAAQ,MAAO,MACfA,QAAQ,WAAY,KACpBA,QAAQ,WAAY,KACpBA,QAAQ,WAAY,KACpBA,QAAQ,WAAY,KAErBD,QAAQ2B,GACZ,OAAOA,EAAMC,MAAM,IAAIC,KAAIC,IACvB,GAAI,kEAAkEvC,KAAKuC,GACvE,MAAO,oCAAoCA,WAG/C,MAAMC,EAA4B,MAATD,GAAqBA,EAAKE,WAAW,GAAK,GAAM,EAEzE,IAAIC,EAAS,gBADQF,EAAmB,aAAe,kBACTD,WAE9C,OAAKnF,KAAKiB,OAAOK,WAEb8D,EACM,yCAA2CE,EAE3CA,EAAS,0CALmBA,CAMrC,IACFC,KAAK,GACX,CAMOC,qBAAqBC,GACzB,MAAMC,EAAO,IAAIL,WAAW,GACtBM,EAAU,IAASN,WAAW,GAC9BO,EAAUH,EAAEJ,WAAW,GAC7B,OAAO3F,OAAOmG,aAAaD,EAAUF,EAAOC,EAC/C,CAGO1D,MACJ,IAAI6D,EAAkB5B,SAAS4B,gBAC3BC,EAAgBC,OAAOC,iBAAiBH,GAAiBI,SAASpG,MAAM,WACxEoG,EAAWH,EAAgBI,SAASJ,EAAc,IAAM,EAE7C3D,MAAMC,KAAKrC,KAAKgB,YAAYoF,uBAAuB3G,EAAkBmB,QAC3E2B,SAAQU,IACb,MAAMH,EAAOG,EAAQJ,UAAUgB,OAC/B,KAAIZ,EAAQoD,wBACRpD,EAAQoD,uBAAuBxE,UAAUc,SAASlD,EAAkBgB,YACpEwC,EAAQqD,oBACRrD,EAAQqD,mBAAmBzE,UAAUc,SAASlD,EAAkBgB,aAEhE,yBAAyBmC,KAAKE,IACV,KAApBG,EAAQsB,UACY,MAApBtB,EAAQsB,YACNtB,EAAQc,eACVd,EAAQc,eAC0B,KAAlCd,EAAQc,cAAcQ,UACY,MAAlCtB,EAAQc,cAAcQ,UAGtB,GAAmB,GAAfzB,EAAKhC,OACDd,KAAKiB,OAAOM,cACZ0B,EAAQJ,UAAY7C,KAAKwF,qBAAqB1C,IAE9CG,EAAQJ,UAAYC,EACpBG,EAAQpB,UAAUC,IAAI,eAE1BmB,EAAQpB,UAAUC,IAAI,cACtBmB,EAAQpB,UAAU0E,OAAO,SACzBtD,EAAQ6B,gBAAgB,QACxB7B,EAAQ6B,gBAAgB,cAGrB,GAAI,2BAA2BlC,KAAKE,GACnC9C,KAAKiB,OAAOM,cACZ0B,EAAQJ,UAAYT,MAAMC,KAAKS,GAAM2C,GACjCzF,KAAKwF,qBAAqBC,KAAIF,KAAK,KAEvCtC,EAAQJ,UAAYC,EACpBG,EAAQpB,UAAUC,IAAI,eAE1BmB,EAAQpB,UAAUC,IAAI,cACtBmB,EAAQpB,UAAU0E,OAAO,SACzBtD,EAAQ6B,gBAAgB,QACxB7B,EAAQ6B,gBAAgB,cACrB,GAAI,uBAAuBlC,KAAKE,GACnCG,EAAQJ,UAAYC,EACpBG,EAAQpB,UAAU0E,OAAO,SACzBtD,EAAQ6B,gBAAgB,QACxB7B,EAAQ6B,gBAAgB,SACxB7B,EAAQpB,UAAUC,IAAI,YACnB,GAAI,aAAac,KAAKE,GAAO,CAChC,MAAM0D,EAAU,eAAerG,KAAK2C,GACpC,IAAI2D,EAAavC,SAASC,cAAc,QACpCuC,EAAQF,EAAQ,GACC,IAAjBE,EAAM5F,SACN4F,EAAQ1G,KAAKwF,qBAAqBkB,IAEtCD,EAAW5D,UAAY,SAAyB,GAAhB6D,EAAM5F,OAAc,GAAK,iBAAiB4F,qBAC1EzD,EAAQ0D,YAAYF,EACvB,MACG,GAAIzG,KAAKiB,OAAOO,oBAAqB,CACjC,IAAIoF,EAAYV,EACZjD,EAAQJ,WAAaC,EAErB8D,GAAa,IAEbA,GAAa,MAGb3D,EAAQ4D,wBAAwBC,QAAUF,IAC1C3D,EAAQJ,UAAYC,EACpBG,EAAQpB,UAAUC,IAAI,OAE7B,CAER,GAER,CAEOI,mBACJE,MAAMC,KAAK6B,SAASkC,uBAAuB3G,EAAkBgB,YAAYwC,IACrE,GAA0B,OAAtBA,EAAQJ,UAGR,OAFAI,EAAQpB,UAAUC,IAAI,gBACtBmB,EAAQpB,UAAUC,IAAIrC,EAAkBiB,SAI5C,GAAKuC,EAAQoD,wBAA2BpD,EAAQqD,mBAKhD,GAAIrD,EAAQoD,uBAAuBxE,UAAUc,SAASlD,EAAkBmB,QACpEqC,EAAQqD,mBAAmBzE,UAAUc,SAASlD,EAAkBmB,OAChEqC,EAAQpB,UAAUC,IAAIrC,EAAkBmB,YAI5C,OAAOqC,EAAQJ,WACX,IAAK,IACDI,EAAQJ,UAAY,IACpB,MAEJ,IAAK,IACDI,EAAQJ,UAAY,SAhBxBI,EAAQpB,UAAUC,IAAIrC,EAAkBmB,MAmB3C,GAER,ECxUL,IAAImG,EAAiB/G,QAAQA,OAAK+G,eAAkB,SAAUC,EAAI3E,EAAM4E,GACpE,GAAIA,GAA6B,IAArBC,UAAUpG,OAAc,IAAK,IAA4BqG,EAAxBC,EAAI,EAAGC,EAAIhF,EAAKvB,OAAYsG,EAAIC,EAAGD,KACxED,GAAQC,KAAK/E,IACR8E,IAAIA,EAAK/E,MAAMzC,UAAUoD,MAAMuE,KAAKjF,EAAM,EAAG+E,IAClDD,EAAGC,GAAK/E,EAAK+E,IAGrB,OAAOJ,EAAGO,OAAOJ,GAAM/E,MAAMzC,UAAUoD,MAAMuE,KAAKjF,GACtD,EACImF,EACA,SAAqBC,EAAMC,EAASC,GAChC3H,KAAKyH,KAAOA,EACZzH,KAAK0H,QAAUA,EACf1H,KAAK2H,GAAKA,EACV3H,KAAK4H,KAAO,SACf,EAIDC,EACA,SAAkBH,GACd1H,KAAK0H,QAAUA,EACf1H,KAAK4H,KAAO,OACZ5H,KAAKyH,KAAO,OACZzH,KAAK2H,GAAKG,QAAQC,QACrB,EAIDC,EACA,SAA6BP,EAAMC,EAASC,EAAIM,GAC5CjI,KAAKyH,KAAOA,EACZzH,KAAK0H,QAAUA,EACf1H,KAAK2H,GAAKA,EACV3H,KAAKiI,IAAMA,EACXjI,KAAK4H,KAAO,YACf,EAIDM,EACA,WACIlI,KAAK4H,KAAO,MACZ5H,KAAKiI,KAAM,EACXjI,KAAKyH,KAAO,MACZzH,KAAK0H,QAAU,KACf1H,KAAK2H,GAAK,IACb,EAIDQ,EACA,WACInI,KAAK4H,KAAO,eACZ5H,KAAKyH,KAAO,eACZzH,KAAK0H,QAAU,KACf1H,KAAK2H,GAAK,IACb,EAMDS,EAAqB,qFAErBC,EAAiB,CACjB,CAAC,MAAO,0BACR,CAAC,OAAQ,qBACT,CAAC,WAAY,uBACb,CAAC,gBAAiB,0BAClB,CAAC,YAAa,yBACd,CAAC,UAAW,8BACZ,CAAC,OAAQ,yBACT,CAAC,OAAQ,4BACT,CAAC,SAAU,6BACX,CAAC,gBAAiB,qBAClB,CACI,mBACA,0DAEJ,CAAC,SAAU,oDACX,CAAC,YAAa,iCACd,CAAC,QAAS,6BACV,CAAC,UAAW,+BACZ,CAAC,QAAS,qBACV,CAAC,aAAc,mCACf,CAAC,QAAS,6BACV,CAAC,QAAS,2BACV,CAAC,KAAM,6CACP,CAAC,KAAM,uCACP,CAAC,KAAM,gBACP,CAAC,OAAQ,qCACT,CAAC,UAAW,uBACZ,CAAC,MAAO,0CACR,CAAC,SAAU,gCACX,CAAC,WAAY,uBACb,CAAC,YAAa,yBACd,CAAC,cAAe,mCAChB,CAAC,cAAe,qCAChB,CAAC,OAAQ,sBACT,CAAC,YAtCoB,iIAwCrBC,EAAuB,CACvB,CAAC,MAAO,kBACR,CAAC,aAAc,WACf,CAAC,gBAAiB,mBAClB,CAAC,iBAAkB,YACnB,CAAC,YAAa,UACd,CAAC,eAAgB,SACjB,CAAC,aAAc,qCACf,CAAC,aAAc,wBACf,CAAC,eAAgB,mCACjB,CAAC,aAAc,iCACf,CAAC,sBAAuB,oBACxB,CAAC,gBAAiB,oBAClB,CAAC,YAAa,oBACd,CAAC,YAAa,oBACd,CAAC,cAAe,oBAChB,CAAC,aAAc,qBACf,CAAC,aAAc,cACf,CAAC,WAAY,WACb,CAAC,SAAU,SACX,CAAC,YAAa,QACd,CAAC,QAAS,iBACV,CAAC,SAAU,6BACX,CAAC,MAAO,OACR,CAAC,OAAQ,QACT,CAAC,OAAQ,UAmCN,SAASC,EAAeC,GAC3B,IAAIC,EApBR,SAAwBD,GAKpB,MAAe,KAAPA,GACJH,EAAeK,QAAO,SAAUC,EAASC,GACrC,IAAIC,EAAUD,EAAG,GAAIE,EAAQF,EAAG,GAChC,GAAID,EACA,OAAOA,EAEX,IAAII,EAAUD,EAAM3I,KAAKqI,GACzB,QAASO,GAAW,CAACF,EAASE,EACjC,IAAE,EACX,CAMsBC,CAAeR,GACjC,IAAKC,EACD,OAAO,KAEX,IAAIhB,EAAOgB,EAAY,GAAI3I,EAAQ2I,EAAY,GAC/C,GAAa,cAAThB,EACA,OAAO,IAAIS,EAGf,IAAIe,EAAenJ,EAAM,IAAMA,EAAM,GAAGmF,MAAM,KAAKM,KAAK,KAAKN,MAAM,KAAKlC,MAAM,EAAG,GAC7EkG,EACIA,EAAanI,OA9GI,IA+GjBmI,EAAelC,EAAcA,EAAc,GAAIkC,GAAc,GA4BzE,SAA4BC,GAExB,IADA,IAAIC,EAAS,GACJC,EAAK,EAAGA,EAAKF,EAAOE,IACzBD,EAAO9I,KAAK,KAEhB,OAAO8I,CACX,CAlCgFE,CA/GnD,EA+G+FJ,EAAanI,SAAS,IAI1ImI,EAAe,GAEnB,IAAIvB,EAAUuB,EAAa1D,KAAK,KAC5BoC,EAOD,SAAkBa,GACrB,IAAK,IAAIY,EAAK,EAAGF,EAAQZ,EAAqBxH,OAAQsI,EAAKF,EAAOE,IAAM,CACpE,IAAIR,EAAKN,EAAqBc,GAAKzB,EAAKiB,EAAG,GAE3C,GAFuDA,EAAG,GACxCzI,KAAKqI,GAEnB,OAAOb,CAEd,CACD,OAAO,IACX,CAhBa2B,CAASd,GACde,EAAiBnB,EAAmBjI,KAAKqI,GAC7C,OAAIe,GAAkBA,EAAe,GAC1B,IAAIvB,EAAoBP,EAAMC,EAASC,EAAI4B,EAAe,IAE9D,IAAI/B,EAAYC,EAAMC,EAASC,EAC1C,CCzLA,MAAMkB,ED+HIW,EACKjB,EAAeiB,GAEF,oBAAbtF,UACc,oBAAduF,WACe,gBAAtBA,UAAUC,QACH,IAAIvB,EAEU,oBAAdsB,UACAlB,EAAekB,UAAUD,WA6DJ,oBAAZ1B,SAA2BA,QAAQJ,QACvC,IAAIG,EAASC,QAAQJ,QAAQ3E,MAAM,IAAM,KAxEtD,IAAgByG,EC7HnBX,GACA3E,SAASyF,KAAK9H,UAAUC,IAAI+G,EAAQpB,MAG7BrF,MAAMC,KAAK6B,SAASkC,uBAAuB,aACjD7D,SAAQqH,IACM,IAAI7I,EAAS6I,GAEnBhI,OAAO,GAClB,CJbF"}