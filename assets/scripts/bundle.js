(()=>{"use strict";var e;!function(e){e.default="default",e.cjkPunc="cjk-punc",e.fullwidthAlphabet="fullwidth-alphabet",e.latin="latin",e.kana="kana",e.ambiguous="ambiguous"}(e||(e={})),String.prototype.segmentise=function(t){let n,i=String(this),s=[],o=0;for(;n=t.exec(i);){let t;n.index>o&&s.push({content:i.substring(o,n.index),formatGuide:e.default}),t=n[1]?e.ambiguous:n[2]?e.cjkPunc:n[3]?e.fullwidthAlphabet:n[4]?e.latin:n[5]?e.kana:e.default,s.push({content:n[0],formatGuide:t}),o=n.index+n[0].length}return i.length>o&&s.push({content:i.substring(o),formatGuide:e.default}),s};class t{rootElement;config;constructor(e,t){this.rootElement=e,this.config=Object.assign({},{shouldPcS:!0,imitatePcS:!0,imitateTransfromToFullWidth:!0,shouldRemoveStyle:!1},t)}parse(){this.config.shouldRemoveStyle&&this.removeStyle(),this.rootElement.classList.add("tategaki"),this.rootElement.classList.add(this.config.imitatePcS?"imitate-pcs":"opentype-pcs"),this.format(this.rootElement),this.tcy(),this.correctAmbiguous()}setElementAttributes(t,n){switch(n.formatGuide){case e.default:return void(t.innerHTML=this.postProcess(n.content));case e.latin:t.setAttribute("lang","en");break;case e.cjkPunc:this.config.shouldPcS&&(t.innerHTML=this.squeeze(n.content))}t.classList.add(n.formatGuide)}postProcess(e){return e.replace(/\n[ \n]*/g,'<br /><span class="indent"></span>')}format(e,t=!0){if(e.nodeType===Node.TEXT_NODE){let t=e.nodeValue;if(!t.trim())return;t=this.correctPuncs(t);let n=/([\u002f\u2013]+|――)|([\u3001\u3002\u301d\u301f\uff01\uff0c\uff1a\uff1b\uff1f\u3008-\u3011\u3014-\u301B\uff08\uff09]+)|([\uff21-\uff3a\uff41-\uff5a]+)|([\p{Script=Latin}0-9\u0020-\u0023\u0025-\u002b\u002c-\u002e\u003a\u003b\u003f\u0040\u005b-\u005d\u005f\u007b\u007d\u00a1\u00a7\u00ab\u00b2\u00b3\u00b6\u00b7\u00b9\u00bb-\u00bf\u2010-\u2012\u2018\u2019\u201c\u201d\u2020\u2021\u2026\u2027\u2030\u2032-\u2037\u2039\u203a\u203c-\u203e\u2047-\u2049\u204e\u2057\u2070\u2074-\u2079\u2080-\u2089\u2150\u2153\u2154\u215b-\u215e\u2160-\u217f\u2474-\u249b\u2e18\u2e2e]+)|([\u3041-\u309f\u30a0-\u30fa\u30fc\u30ff]+)/gu,i=t.segmentise(n),s=e.parentElement;return void(s.childElementCount||1!==i.length?(i.forEach((t=>{let n=document.createElement("span");n.innerText=t.content,this.setElementAttributes(n,t),s.insertBefore(n,e)})),s.removeChild(e)):this.setElementAttributes(s,i[0]))}if("BR"===e.nodeName)return;const n="P"===e.nodeName||"BLOCKQUOTE"===e.nodeName;Array.from(e.childNodes).forEach((e=>{this.format(e,!n&&t)}))}removeStyle(e=this.rootElement){e.removeAttribute("style"),e.removeAttribute("width"),e.removeAttribute("height"),Array.from(e.children,(e=>{this.removeStyle(e)}))}correctPuncs(e){return e.replace(/——|──/g,"――").replace(/……/g,"⋯⋯")}squeeze(e){return e.split("").map((e=>{if(/[\u3001\u3002\uff0c\uff01\uff1a\uff1b\uff1f]/.test(e))return`<span class="squeeze-other-punc">${e}</span>`;const t="〝"===e||e.charCodeAt(0)%2==0;let n=`<span class="${t?"squeeze-in":"squeeze-out"}">${e}</span>`;return this.config.imitatePcS?t?'<span class="squeeze-in-space"></span>'+n:n+'<span class="squeeze-out-space"></span>':n})).join("")}transfromToFullWidth(e){const t="0".charCodeAt(0),n="０".charCodeAt(0),i=e.charCodeAt(0);return String.fromCharCode(i-t+n)}tcy(){let t=document.documentElement,n=window.getComputedStyle(t).fontSize.match(/(\d+)px/),i=n?parseInt(n[1]):0;Array.from(this.rootElement.getElementsByClassName(e.latin)).forEach((t=>{const n=t.innerHTML.trim();if(!(t.previousElementSibling&&t.previousElementSibling.classList.contains(e.ambiguous)||t.nextElementSibling&&t.nextElementSibling.classList.contains(e.ambiguous))&&/^[\w\p{Script=Latin}]/u.test(n)&&"I"!=t.nodeName&&"EM"!=t.nodeName&&(!t.parentElement||t.parentElement&&"I"!=t.parentElement.nodeName&&"EM"!=t.parentElement.nodeName))if(1==n.length)this.config.imitateTransfromToFullWidth?t.innerHTML=this.transfromToFullWidth(n):(t.innerHTML=n,t.classList.add("to-fullwidth")),t.classList.remove("latin"),t.removeAttribute("lang");else if(/^([A-Z]{3,10}|\d{4,10})$/.test(n))this.config.imitateTransfromToFullWidth?t.innerHTML=Array.from(n,(e=>this.transfromToFullWidth(e))).join(""):(t.innerHTML=n,t.classList.add("to-fullwidth")),t.classList.remove("latin"),t.removeAttribute("lang");else if(/^[A-Z]{2}$|^\d{2,3}$/.test(n))t.innerHTML=n,t.classList.remove("latin"),t.removeAttribute("lang"),t.classList.add("tcy");else if(/^\d{1,3}%$/.test(n)){const e=/^(\d{1,3})%$/.exec(n);let i=document.createElement("span"),s=e[1];1===s.length&&(s=this.transfromToFullWidth(s)),i.innerHTML=`<span ${1==s.length?"":'class="tcy"'}>${s}</span>&#8288;％`,t.replaceWith(i)}else{let e=i;t.innerHTML!=n?e*=1.5:e*=1.333,t.getBoundingClientRect().height<=e&&(t.innerHTML=n,t.classList.add("tcy"))}}))}correctAmbiguous(){Array.from(document.getElementsByClassName(e.ambiguous),(t=>{if("――"!==t.innerHTML)if(t.previousElementSibling&&t.nextElementSibling)if(t.previousElementSibling.classList.contains(e.latin)&&t.nextElementSibling.classList.contains(e.latin))t.classList.add("latin");else switch(t.innerHTML){case"/":t.innerHTML="／";break;case"–":t.innerHTML="―"}else t.classList.add("latin");else t.classList.add("aalt-on")}))}}var n=function(e,t,n){if(n||2===arguments.length)for(var i,s=0,o=t.length;s<o;s++)!i&&s in t||(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))},i=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},s=function(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"},o=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},r=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,a=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],u=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function l(e){var t=function(e){return""!==e&&a.reduce((function(t,n){var i=n[0],s=n[1];if(t)return t;var o=s.exec(e);return!!o&&[i,o]}),!1)}(e);if(!t)return null;var l=t[0],c=t[1];if("searchbot"===l)return new o;var d=c[1]&&c[1].split(".").join("_").split("_").slice(0,3);d?d.length<3&&(d=n(n([],d,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-d.length),!0)):d=[];var f=d.join("."),m=function(e){for(var t=0,n=u.length;t<n;t++){var i=u[t],s=i[0];if(i[1].exec(e))return s}return null}(e),h=r.exec(e);return h&&h[1]?new s(l,f,m,h[1]):new i(l,f,m)}const c="undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}:"undefined"!=typeof navigator?l(navigator.userAgent):"undefined"!=typeof process&&process.version?new function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}(process.version.slice(1)):null;c&&document.body.classList.add(c.name),Array.from(document.getElementsByClassName("tategaki")).forEach((e=>{new t(e).parse()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ekRvQixHQUNBMUUsU0FBUzBGLEtBQUtwSCxVQUFVQyxJQUFJbUcsRUFBUWhCLE1BRzdCbkQsTUFBTUMsS0FBS1IsU0FBU21DLHVCQUF1QixhQUNqRHJDLFNBQVE2RixJQUNNLElBQUlqSSxFQUFTaUksR0FFbkJ2SCxZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF0ZWdha2kvLi9zcmMvZm9ybWF0U2VnbWVudC50cyIsIndlYnBhY2s6Ly90YXRlZ2FraS8uL3NyYy9leHRlbnNpb25zLnRzIiwid2VicGFjazovL3RhdGVnYWtpLy4vc3JjL3RhdGVnYWtpLnRzIiwid2VicGFjazovL3RhdGVnYWtpLy4vbm9kZV9tb2R1bGVzL2RldGVjdC1icm93c2VyL2VzL2luZGV4LmpzIiwid2VicGFjazovL3RhdGVnYWtpLy4vc3JjL2V4dGVybmFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBlbnVtIFN0cmluZ0Zvcm1hdEd1aWRlIHtcbiAgICBkZWZhdWx0ID0gJ2RlZmF1bHQnLFxuICAgIGNqa1B1bmMgPSAnY2prLXB1bmMnLFxuICAgIGZ1bGx3aWR0aEFscGhhYmV0ID0gJ2Z1bGx3aWR0aC1hbHBoYWJldCcsXG4gICAgbGF0aW4gPSAnbGF0aW4nLFxuICAgIGthbmEgPSAna2FuYScsXG4gICAgYW1iaWd1b3VzID0gJ2FtYmlndW91cycsXG59XG5cbmV4cG9ydCB0eXBlIFN0cmluZ0Zvcm1hdFNlZ21lbnQgPSB7XG4gICAgY29udGVudDogc3RyaW5nXG4gICAgZm9ybWF0R3VpZGU6IFN0cmluZ0Zvcm1hdEd1aWRlXG59XG4iLCJpbXBvcnQgeyBTdHJpbmdGb3JtYXRTZWdtZW50LCBTdHJpbmdGb3JtYXRHdWlkZSB9IGZyb20gJy4vZm9ybWF0U2VnbWVudCdcblxuZGVjbGFyZSBnbG9iYWwge1xuICAgIGludGVyZmFjZSBTdHJpbmcge1xuICAgICAgICBzZWdtZW50aXNlKHJlOiBSZWdFeHApOiBTdHJpbmdGb3JtYXRTZWdtZW50W11cbiAgICB9XG59XG5cblN0cmluZy5wcm90b3R5cGUuc2VnbWVudGlzZSA9IGZ1bmN0aW9uIChyZSkge1xuICAgIGxldCBzdHIgPSBTdHJpbmcodGhpcykgXG4gICAgbGV0IHNlZ21lbnRzOiBTdHJpbmdGb3JtYXRTZWdtZW50W10gPSBbXVxuICAgIGxldCBpbmRleDogbnVtYmVyID0gMFxuICAgIGxldCBtYXRjaDogUmVnRXhwRXhlY0FycmF5IHwgbnVsbFxuICAgIHdoaWxlIChtYXRjaCA9IHJlLmV4ZWMoc3RyKSkge1xuICAgICAgICBpZiAobWF0Y2guaW5kZXggPiBpbmRleCkge1xuICAgICAgICAgICAgc2VnbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgY29udGVudDogc3RyLnN1YnN0cmluZyhpbmRleCwgbWF0Y2guaW5kZXgpLFxuICAgICAgICAgICAgICAgIGZvcm1hdEd1aWRlOiBTdHJpbmdGb3JtYXRHdWlkZS5kZWZhdWx0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZvcm1hdEd1aWRlOiBTdHJpbmdGb3JtYXRHdWlkZSB8IHVuZGVmaW5lZFxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICAgIGZvcm1hdEd1aWRlID0gU3RyaW5nRm9ybWF0R3VpZGUuYW1iaWd1b3VzXG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hbMl0pIHtcbiAgICAgICAgICAgIGZvcm1hdEd1aWRlID0gU3RyaW5nRm9ybWF0R3VpZGUuY2prUHVuY1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoWzNdKSB7XG4gICAgICAgICAgICBmb3JtYXRHdWlkZSA9IFN0cmluZ0Zvcm1hdEd1aWRlLmZ1bGx3aWR0aEFscGhhYmV0XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hbNF0pIHtcbiAgICAgICAgICAgIGZvcm1hdEd1aWRlID0gU3RyaW5nRm9ybWF0R3VpZGUubGF0aW5cbiAgICAgICAgfSBlbHNlIGlmIChtYXRjaFs1XSkge1xuICAgICAgICAgICAgZm9ybWF0R3VpZGUgPSBTdHJpbmdGb3JtYXRHdWlkZS5rYW5hXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3JtYXRHdWlkZSA9IFN0cmluZ0Zvcm1hdEd1aWRlLmRlZmF1bHRcbiAgICAgICAgfVxuXG4gICAgICAgIHNlZ21lbnRzLnB1c2goe1xuICAgICAgICAgICAgY29udGVudDogbWF0Y2hbMF0sXG4gICAgICAgICAgICBmb3JtYXRHdWlkZTogZm9ybWF0R3VpZGUhXG4gICAgICAgIH0pXG4gICAgICAgIGluZGV4ID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGhcbiAgICB9XG4gICAgXG4gICAgaWYgKHN0ci5sZW5ndGggPiBpbmRleCkge1xuICAgICAgICBzZWdtZW50cy5wdXNoKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN0ci5zdWJzdHJpbmcoaW5kZXgpLFxuICAgICAgICAgICAgZm9ybWF0R3VpZGU6IFN0cmluZ0Zvcm1hdEd1aWRlLmRlZmF1bHRcbiAgICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIHNlZ21lbnRzXG59XG4iLCJpbXBvcnQgeyBTdHJpbmdGb3JtYXRTZWdtZW50LCBTdHJpbmdGb3JtYXRHdWlkZSB9IGZyb20gJy4vZm9ybWF0U2VnbWVudCdcbmltcG9ydCAnLi9leHRlbnNpb25zJ1xuXG5pbnRlcmZhY2UgQ29uZmlnIHtcbiAgICBzaG91bGRQY1MgPzogYm9vbGVhblxuICAgIGltaXRhdGVQY1MgPzogYm9vbGVhblxuICAgIGltaXRhdGVUcmFuc2Zyb21Ub0Z1bGxXaWR0aCA/OiBib29sZWFuXG4gICAgc2hvdWxkUmVtb3ZlU3R5bGUgPzogYm9vbGVhblxufVxuXG5leHBvcnQgY2xhc3MgVGF0ZWdha2kge1xuICAgIHJvb3RFbGVtZW50OiBFbGVtZW50XG4gICAgY29uZmlnOiBDb25maWdcblxuICAgIGNvbnN0cnVjdG9yKHJvb3RFbGVtZW50OiBFbGVtZW50LCBjb25maWc/OiBDb25maWcpIHtcbiAgICAgICAgdGhpcy5yb290RWxlbWVudCA9IHJvb3RFbGVtZW50XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENvbmZpZzogQ29uZmlnID0ge1xuICAgICAgICAgICAgc2hvdWxkUGNTOiB0cnVlLFxuICAgICAgICAgICAgaW1pdGF0ZVBjUzogdHJ1ZSxcbiAgICAgICAgICAgIGltaXRhdGVUcmFuc2Zyb21Ub0Z1bGxXaWR0aDogdHJ1ZSxcbiAgICAgICAgICAgIHNob3VsZFJlbW92ZVN0eWxlOiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0Q29uZmlnLCBjb25maWcpXG4gICAgfVxuXG4gICAgcGFyc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5zaG91bGRSZW1vdmVTdHlsZSkgeyB0aGlzLnJlbW92ZVN0eWxlKCkgfVxuXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGF0ZWdha2knKVxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jb25maWcuaW1pdGF0ZVBjUyA/ICdpbWl0YXRlLXBjcycgOiAnb3BlbnR5cGUtcGNzJylcblxuICAgICAgICB0aGlzLmZvcm1hdCh0aGlzLnJvb3RFbGVtZW50KVxuICAgICAgICB0aGlzLnRjeSgpXG4gICAgICAgIHRoaXMuY29ycmVjdEFtYmlndW91cygpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRFbGVtZW50QXR0cmlidXRlcyhlbGVtZW50OiBFbGVtZW50LCBzZWdtZW50OiBTdHJpbmdGb3JtYXRTZWdtZW50KSB7XG4gICAgICAgIHN3aXRjaChzZWdtZW50LmZvcm1hdEd1aWRlKSB7XG4gICAgICAgICAgICBjYXNlIFN0cmluZ0Zvcm1hdEd1aWRlLmRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9ICB0aGlzLnBvc3RQcm9jZXNzKHNlZ21lbnQuY29udGVudClcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgU3RyaW5nRm9ybWF0R3VpZGUubGF0aW46IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnbGFuZycsICdlbicpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgU3RyaW5nRm9ybWF0R3VpZGUuY2prUHVuYzoge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5zaG91bGRQY1MpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLnNxdWVlemUoc2VnbWVudC5jb250ZW50KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHNlZ21lbnQuZm9ybWF0R3VpZGUpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwb3N0UHJvY2Vzcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGV4dFxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcblsgXFxuXSovZywgYDxiciAvPjxzcGFuIGNsYXNzPVwiaW5kZW50XCI+PC9zcGFuPmApXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXQobm9kZTogTm9kZSwgcGFzc1VudGlsUGFyYTogYm9vbGVhbj10cnVlKSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICAgICAgbGV0IHRleHQgPSBub2RlLm5vZGVWYWx1ZSFcbiAgICAgICAgICAgIGlmICghdGV4dC50cmltKCkpIHsgcmV0dXJuIH1cbiAgICAgICAgICAgIHRleHQgPSB0aGlzLmNvcnJlY3RQdW5jcyh0ZXh0KVxuXG4gICAgICAgICAgICAvLyAoQU1CSUdVT1VTKXwoQ0pLX1BVTkMpfChGVUxMX1dJRFRIX0FMUEhBQkVUKXwoTEFUSU4pfChLQU5BKVxuICAgICAgICAgICAgbGV0IHJlID0gLyhbXFx1MDAyZlxcdTIwMTNdK3zigJXigJUpfChbXFx1MzAwMVxcdTMwMDJcXHUzMDFkXFx1MzAxZlxcdWZmMDFcXHVmZjBjXFx1ZmYxYVxcdWZmMWJcXHVmZjFmXFx1MzAwOC1cXHUzMDExXFx1MzAxNC1cXHUzMDFCXFx1ZmYwOFxcdWZmMDldKyl8KFtcXHVmZjIxLVxcdWZmM2FcXHVmZjQxLVxcdWZmNWFdKyl8KFtcXHB7U2NyaXB0PUxhdGlufTAtOVxcdTAwMjAtXFx1MDAyM1xcdTAwMjUtXFx1MDAyYlxcdTAwMmMtXFx1MDAyZVxcdTAwM2FcXHUwMDNiXFx1MDAzZlxcdTAwNDBcXHUwMDViLVxcdTAwNWRcXHUwMDVmXFx1MDA3YlxcdTAwN2RcXHUwMGExXFx1MDBhN1xcdTAwYWJcXHUwMGIyXFx1MDBiM1xcdTAwYjZcXHUwMGI3XFx1MDBiOVxcdTAwYmItXFx1MDBiZlxcdTIwMTAtXFx1MjAxMlxcdTIwMThcXHUyMDE5XFx1MjAxY1xcdTIwMWRcXHUyMDIwXFx1MjAyMVxcdTIwMjZcXHUyMDI3XFx1MjAzMFxcdTIwMzItXFx1MjAzN1xcdTIwMzlcXHUyMDNhXFx1MjAzYy1cXHUyMDNlXFx1MjA0Ny1cXHUyMDQ5XFx1MjA0ZVxcdTIwNTdcXHUyMDcwXFx1MjA3NC1cXHUyMDc5XFx1MjA4MC1cXHUyMDg5XFx1MjE1MFxcdTIxNTNcXHUyMTU0XFx1MjE1Yi1cXHUyMTVlXFx1MjE2MC1cXHUyMTdmXFx1MjQ3NC1cXHUyNDliXFx1MmUxOFxcdTJlMmVdKyl8KFtcXHUzMDQxLVxcdTMwOWZcXHUzMGEwLVxcdTMwZmFcXHUzMGZjXFx1MzBmZl0rKS9ndVxuXG4gICAgICAgICAgICBsZXQgc2VnbWVudHMgPSB0ZXh0LnNlZ21lbnRpc2UocmUpXG5cbiAgICAgICAgICAgIGxldCBwYXJlbnRFbGVtZW50ID0gbm9kZS5wYXJlbnRFbGVtZW50IVxuICAgICAgICAgICAgaWYgKCFwYXJlbnRFbGVtZW50LmNoaWxkRWxlbWVudENvdW50ICYmIHNlZ21lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudEF0dHJpYnV0ZXMocGFyZW50RWxlbWVudCwgc2VnbWVudHNbMF0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlZ21lbnRzLmZvckVhY2goc2VnbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzdWJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgICAgICAgICAgICAgICAgIHN1YkVsZW1lbnQuaW5uZXJUZXh0ID0gc2VnbWVudC5jb250ZW50XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudEF0dHJpYnV0ZXMoc3ViRWxlbWVudCwgc2VnbWVudClcblxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShzdWJFbGVtZW50LCBub2RlKVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKG5vZGUpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT09ICdCUicpIHsgcmV0dXJuIH1cbiAgICAgICAgY29uc3QgaXNQYXJhID0gbm9kZS5ub2RlTmFtZSA9PT0gJ1AnIHx8IG5vZGUubm9kZU5hbWUgPT09ICdCTE9DS1FVT1RFJ1xuXG4gICAgICAgIGxldCBjaGlsZE5vZGVzID0gQXJyYXkuZnJvbShub2RlLmNoaWxkTm9kZXMpXG4gICAgICAgIGNoaWxkTm9kZXMuZm9yRWFjaChjaGlsZE5vZGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5mb3JtYXQoY2hpbGROb2RlLCBpc1BhcmEgPyBmYWxzZSA6IHBhc3NVbnRpbFBhcmEpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW1vdmVTdHlsZShlbGVtZW50OiBFbGVtZW50PXRoaXMucm9vdEVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJylcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3dpZHRoJylcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2hlaWdodCcpXG5cbiAgICAgICAgQXJyYXkuZnJvbShlbGVtZW50LmNoaWxkcmVuLCBjaGlsZCA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN0eWxlKGNoaWxkKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFJhdyByZXBsYWNlbWVudHMgZm9yIHNwZWNpZmljIHB1bmNzICYgc3ltYm9sc1xuICAgIHByaXZhdGUgY29ycmVjdFB1bmNzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0ZXh0XG4gICAgICAgICAgICAucmVwbGFjZSgv4oCU4oCUfOKUgOKUgC9nLCAn4oCV4oCVJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC/igKbigKYvZywgJ+KLr+KLrycpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzcXVlZXplKHB1bmNzOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gcHVuY3Muc3BsaXQoJycpLm1hcChwdW5jID0+IHtcbiAgICAgICAgICAgIGlmICgvW1xcdTMwMDFcXHUzMDAyXFx1ZmYwY1xcdWZmMDFcXHVmZjFhXFx1ZmYxYlxcdWZmMWZdLy50ZXN0KHB1bmMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGA8c3BhbiBjbGFzcz1cInNxdWVlemUtb3RoZXItcHVuY1wiPiR7cHVuY308L3NwYW4+YFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBpc09wZW5pbmdCcmFja2V0ID0gcHVuYyA9PT0gJ1xcdTMwMWQnIHx8IHB1bmMuY2hhckNvZGVBdCgwKSAlIDIgPT09IDBcbiAgICAgICAgICAgIGNvbnN0IHNxdWVlemVDbGFzcyA9IGlzT3BlbmluZ0JyYWNrZXQgPyAnc3F1ZWV6ZS1pbicgOiAnc3F1ZWV6ZS1vdXQnXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gYDxzcGFuIGNsYXNzPVwiJHtzcXVlZXplQ2xhc3N9XCI+JHtwdW5jfTwvc3Bhbj5gXG5cbiAgICAgICAgICAgIGlmICghdGhpcy5jb25maWcuaW1pdGF0ZVBjUykgeyByZXR1cm4gcmVzdWx0IH1cblxuICAgICAgICAgICAgaWYgKGlzT3BlbmluZ0JyYWNrZXQpIHtcbiAgICAgICAgICAgICAgIHJldHVybiBgPHNwYW4gY2xhc3M9XCJzcXVlZXplLWluLXNwYWNlXCI+PC9zcGFuPmAgKyByZXN1bHQgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCArIGA8c3BhbiBjbGFzcz1cInNxdWVlemUtb3V0LXNwYWNlXCI+PC9zcGFuPmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuam9pbignJylcbiAgICB9XG5cbiAgICAvLyBTaW5jZSBub3QgYWxsIGJyb3dzZXIgc3VwcG9ydCBmdWxsLXdpZHRoIHRyYW5zZm9ybWF0aW9uLFxuICAgIC8vIGl0J2xsIGRvIHNvbWUgdW5pY29kZSBjYWxjIHRvIGRvIHRoYXQuXG4gICAgLy8gRGVsdGEgYmV0d2VlbiBjb2RlcyBvZiBjaGFyYWN0ZXJzIGluIGZ1bGwtd2lkdGggaXMgYXMgc2FtZSBcbiAgICAvLyBhcyBBU0NJSSwgc28gY2hvb3NlIHplcm8gYXMgYmFzZSBmb3IgY2FsY3VsYXRpb25cbiAgICBwcml2YXRlIHRyYW5zZnJvbVRvRnVsbFdpZHRoKHg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGJhc2UgPSAnMCcuY2hhckNvZGVBdCgwKVxuICAgICAgICBjb25zdCBuZXdCYXNlID0gJ1xcdWZmMTAnLmNoYXJDb2RlQXQoMClcbiAgICAgICAgY29uc3QgY3VycmVudCA9IHguY2hhckNvZGVBdCgwKVxuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjdXJyZW50IC0gYmFzZSArIG5ld0Jhc2UpXG4gICAgfVxuXG4gICAgLy8gWW9rb2dha2kgaW4gVGF0ZWdha2kgKFRhdGVnYWtpLUNoeXUtWW9rb2dha2kpXG4gICAgcHJpdmF0ZSB0Y3koKSB7XG4gICAgICAgIGxldCBkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICAgICAgbGV0IGZvbnRTaXplTWF0Y2ggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudEVsZW1lbnQpLmZvbnRTaXplLm1hdGNoKC8oXFxkKylweC8pXG4gICAgICAgIGxldCBmb250U2l6ZSA9IGZvbnRTaXplTWF0Y2ggPyBwYXJzZUludChmb250U2l6ZU1hdGNoWzFdKSA6IDBcblxuICAgICAgICBsZXQgZWxlbWVudHMgPSBBcnJheS5mcm9tKHRoaXMucm9vdEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShTdHJpbmdGb3JtYXRHdWlkZS5sYXRpbikpXG4gICAgICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gZWxlbWVudC5pbm5lckhUTUwudHJpbSgpXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmIFxuICAgICAgICAgICAgICAgIGVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZy5jbGFzc0xpc3QuY29udGFpbnMoU3RyaW5nRm9ybWF0R3VpZGUuYW1iaWd1b3VzKSB8fCBcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZyAmJlxuICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5jb250YWlucyhTdHJpbmdGb3JtYXRHdWlkZS5hbWJpZ3VvdXMpKSB7IHJldHVybiB9XG5cbiAgICAgICAgICAgIGlmICgvXltcXHdcXHB7U2NyaXB0PUxhdGlufV0vdS50ZXN0KHRleHQpICYmIFxuICAgICAgICAgICAgICAgIGVsZW1lbnQubm9kZU5hbWUgIT0gJ0knICYmIFxuICAgICAgICAgICAgICAgIGVsZW1lbnQubm9kZU5hbWUgIT0gJ0VNJyAmJlxuICAgICAgICAgICAgICAgICghZWxlbWVudC5wYXJlbnRFbGVtZW50IHx8XG4gICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnRFbGVtZW50ICYmXG4gICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnRFbGVtZW50Lm5vZGVOYW1lICE9ICdJJyAmJlxuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50RWxlbWVudC5ub2RlTmFtZSAhPSAnRU0nKSkge1xuICAgICAgICAgICAgICAgIC8vIFdvcmRzIHdpdGggb25seSBvbmUgbGV0dHJlIHNob3VsZCB0dXJuIHRvIGZ1bGwtd2lkdGhcbiAgICAgICAgICAgICAgICAvLyBhbmQgbG9zZSBgbGF0aW5gIGNsYXNzXG4gICAgICAgICAgICAgICAgaWYgKHRleHQubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLmltaXRhdGVUcmFuc2Zyb21Ub0Z1bGxXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLnRyYW5zZnJvbVRvRnVsbFdpZHRoKHRleHQpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndG8tZnVsbHdpZHRoJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2xhdGluJylcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2xhbmcnKVxuICAgICAgICAgICAgICAgIC8vIEFiYnJldmlhdGlvbnMgYW5kIG51bWJlcnMgbm8gbW9yZSB0aGFuIDQgZGlnaXRzIHNob3VsZFxuICAgICAgICAgICAgICAgIC8vIHR1cm4gdG8gZnVsbC13aWR0aFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL14oW0EtWl17MywxMH18XFxkezQsMTB9KSQvLnRlc3QodGV4dCkpICB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5pbWl0YXRlVHJhbnNmcm9tVG9GdWxsV2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gQXJyYXkuZnJvbSh0ZXh0LCB4ID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmcm9tVG9GdWxsV2lkdGgoeCkpLmpvaW4oJycpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndG8tZnVsbHdpZHRoJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2xhdGluJylcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2xhbmcnKVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL15bQS1aXXsyfSR8XlxcZHsyLDN9JC8udGVzdCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHRleHRcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdsYXRpbicpXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdsYW5nJylcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd0Y3knKVxuICAgICAgICAgICAgICAgIC8vIFBlcmNlbnRhZ2VcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9eXFxkezEsM30lJC8udGVzdCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gL14oXFxkezEsM30pJSQvLmV4ZWModGV4dCkhXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgICAgICAgICAgICAgICAgIGxldCBkaWdpdCA9IG1hdGNoZXNbMV1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpZ2l0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlnaXQgPSB0aGlzLnRyYW5zZnJvbVRvRnVsbFdpZHRoKGRpZ2l0KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQuaW5uZXJIVE1MID0gYDxzcGFuICR7ZGlnaXQubGVuZ3RoID09IDEgPyAnJyA6ICdjbGFzcz1cInRjeVwiJ30+JHtkaWdpdH08L3NwYW4+JiM4Mjg4O++8hWBcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZXBsYWNlV2l0aChuZXdFbGVtZW50KVxuICAgICAgICAgICAgICAgIC8vIE1lYXN1cmUgaGVpZ2h0IG9mIHRoZSBlbGVtZW50IHRvIGRlY2lkZSBpZiBUQ1lcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGhyZXNob2xkID0gZm9udFNpemVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuaW5uZXJIVE1MICE9IHRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5lZWQgYWRqdXN0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJlc2hvbGQgKj0gMS41XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJlc2hvbGQgKj0gMS4zMzNcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCA8PSB0aHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd0Y3knKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHByaXZhdGUgY29ycmVjdEFtYmlndW91cygpIHtcbiAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFN0cmluZ0Zvcm1hdEd1aWRlLmFtYmlndW91cyksIGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQuaW5uZXJIVE1MID09PSAn4oCV4oCVJykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWFsdC1vbicpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIHx8ICFlbGVtZW50Lm5leHRFbGVtZW50U2libGluZykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbGF0aW4nKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5jb250YWlucyhTdHJpbmdGb3JtYXRHdWlkZS5sYXRpbikgJiZcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuY29udGFpbnMoU3RyaW5nRm9ybWF0R3VpZGUubGF0aW4pKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdsYXRpbicpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaChlbGVtZW50LmlubmVySFRNTCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJy8nOiB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJ++8jydcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAn4oCTJzoge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9ICfigJUnXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn1cbiIsInZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbnZhciBCcm93c2VySW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCcm93c2VySW5mbyhuYW1lLCB2ZXJzaW9uLCBvcykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgICB0aGlzLm9zID0gb3M7XG4gICAgICAgIHRoaXMudHlwZSA9ICdicm93c2VyJztcbiAgICB9XG4gICAgcmV0dXJuIEJyb3dzZXJJbmZvO1xufSgpKTtcbmV4cG9ydCB7IEJyb3dzZXJJbmZvIH07XG52YXIgTm9kZUluZm8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTm9kZUluZm8odmVyc2lvbikge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm9kZSc7XG4gICAgICAgIHRoaXMubmFtZSA9ICdub2RlJztcbiAgICAgICAgdGhpcy5vcyA9IHByb2Nlc3MucGxhdGZvcm07XG4gICAgfVxuICAgIHJldHVybiBOb2RlSW5mbztcbn0oKSk7XG5leHBvcnQgeyBOb2RlSW5mbyB9O1xudmFyIFNlYXJjaEJvdERldmljZUluZm8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2VhcmNoQm90RGV2aWNlSW5mbyhuYW1lLCB2ZXJzaW9uLCBvcywgYm90KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIHRoaXMub3MgPSBvcztcbiAgICAgICAgdGhpcy5ib3QgPSBib3Q7XG4gICAgICAgIHRoaXMudHlwZSA9ICdib3QtZGV2aWNlJztcbiAgICB9XG4gICAgcmV0dXJuIFNlYXJjaEJvdERldmljZUluZm87XG59KCkpO1xuZXhwb3J0IHsgU2VhcmNoQm90RGV2aWNlSW5mbyB9O1xudmFyIEJvdEluZm8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQm90SW5mbygpIHtcbiAgICAgICAgdGhpcy50eXBlID0gJ2JvdCc7XG4gICAgICAgIHRoaXMuYm90ID0gdHJ1ZTsgLy8gTk9URTogZGVwcmVjYXRlZCB0ZXN0IG5hbWUgaW5zdGVhZFxuICAgICAgICB0aGlzLm5hbWUgPSAnYm90JztcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcyA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBCb3RJbmZvO1xufSgpKTtcbmV4cG9ydCB7IEJvdEluZm8gfTtcbnZhciBSZWFjdE5hdGl2ZUluZm8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVhY3ROYXRpdmVJbmZvKCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAncmVhY3QtbmF0aXZlJztcbiAgICAgICAgdGhpcy5uYW1lID0gJ3JlYWN0LW5hdGl2ZSc7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IG51bGw7XG4gICAgICAgIHRoaXMub3MgPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gUmVhY3ROYXRpdmVJbmZvO1xufSgpKTtcbmV4cG9ydCB7IFJlYWN0TmF0aXZlSW5mbyB9O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxudmFyIFNFQVJDSEJPWF9VQV9SRUdFWCA9IC9hbGV4YXxib3R8Y3Jhd2woZXJ8aW5nKXxmYWNlYm9va2V4dGVybmFsaGl0fGZlZWRidXJuZXJ8Z29vZ2xlIHdlYiBwcmV2aWV3fG5hZ2lvc3xwb3N0cmFua3xwaW5nZG9tfHNsdXJwfHNwaWRlcnx5YWhvbyF8eWFuZGV4LztcbnZhciBTRUFSQ0hCT1RfT1NfUkVHRVggPSAvKG51aGt8Y3VybHxHb29nbGVib3R8WWFtbXlib3R8T3BlbmJvdHxTbHVycHxNU05Cb3R8QXNrXFwgSmVldmVzXFwvVGVvbWF8aWFfYXJjaGl2ZXIpLztcbnZhciBSRVFVSVJFRF9WRVJTSU9OX1BBUlRTID0gMztcbnZhciB1c2VyQWdlbnRSdWxlcyA9IFtcbiAgICBbJ2FvbCcsIC9BT0xTaGllbGRcXC8oWzAtOVxcLl9dKykvXSxcbiAgICBbJ2VkZ2UnLCAvRWRnZVxcLyhbMC05XFwuX10rKS9dLFxuICAgIFsnZWRnZS1pb3MnLCAvRWRnaU9TXFwvKFswLTlcXC5fXSspL10sXG4gICAgWyd5YW5kZXhicm93c2VyJywgL1lhQnJvd3NlclxcLyhbMC05XFwuX10rKS9dLFxuICAgIFsna2FrYW90YWxrJywgL0tBS0FPVEFMS1xccyhbMC05XFwuXSspL10sXG4gICAgWydzYW1zdW5nJywgL1NhbXN1bmdCcm93c2VyXFwvKFswLTlcXC5dKykvXSxcbiAgICBbJ3NpbGsnLCAvXFxiU2lsa1xcLyhbMC05Ll8tXSspXFxiL10sXG4gICAgWydtaXVpJywgL01pdWlCcm93c2VyXFwvKFswLTlcXC5dKykkL10sXG4gICAgWydiZWFrZXInLCAvQmVha2VyQnJvd3NlclxcLyhbMC05XFwuXSspL10sXG4gICAgWydlZGdlLWNocm9taXVtJywgL0VkZ0E/XFwvKFswLTlcXC5dKykvXSxcbiAgICBbXG4gICAgICAgICdjaHJvbWl1bS13ZWJ2aWV3JyxcbiAgICAgICAgLyg/IUNocm9tLipPUFIpd3ZcXCkuKkNocm9tKD86ZXxpdW0pXFwvKFswLTlcXC5dKykoOj9cXHN8JCkvLFxuICAgIF0sXG4gICAgWydjaHJvbWUnLCAvKD8hQ2hyb20uKk9QUilDaHJvbSg/OmV8aXVtKVxcLyhbMC05XFwuXSspKDo/XFxzfCQpL10sXG4gICAgWydwaGFudG9tanMnLCAvUGhhbnRvbUpTXFwvKFswLTlcXC5dKykoOj9cXHN8JCkvXSxcbiAgICBbJ2NyaW9zJywgL0NyaU9TXFwvKFswLTlcXC5dKykoOj9cXHN8JCkvXSxcbiAgICBbJ2ZpcmVmb3gnLCAvRmlyZWZveFxcLyhbMC05XFwuXSspKD86XFxzfCQpL10sXG4gICAgWydmeGlvcycsIC9GeGlPU1xcLyhbMC05XFwuXSspL10sXG4gICAgWydvcGVyYS1taW5pJywgL09wZXJhIE1pbmkuKlZlcnNpb25cXC8oWzAtOVxcLl0rKS9dLFxuICAgIFsnb3BlcmEnLCAvT3BlcmFcXC8oWzAtOVxcLl0rKSg/Olxcc3wkKS9dLFxuICAgIFsnb3BlcmEnLCAvT1BSXFwvKFswLTlcXC5dKykoOj9cXHN8JCkvXSxcbiAgICBbJ2llJywgL1RyaWRlbnRcXC83XFwuMC4qcnZcXDooWzAtOVxcLl0rKS4qXFwpLipHZWNrbyQvXSxcbiAgICBbJ2llJywgL01TSUVcXHMoWzAtOVxcLl0rKTsuKlRyaWRlbnRcXC9bNC03XS4wL10sXG4gICAgWydpZScsIC9NU0lFXFxzKDdcXC4wKS9dLFxuICAgIFsnYmIxMCcsIC9CQjEwO1xcc1RvdWNoLipWZXJzaW9uXFwvKFswLTlcXC5dKykvXSxcbiAgICBbJ2FuZHJvaWQnLCAvQW5kcm9pZFxccyhbMC05XFwuXSspL10sXG4gICAgWydpb3MnLCAvVmVyc2lvblxcLyhbMC05XFwuX10rKS4qTW9iaWxlLipTYWZhcmkuKi9dLFxuICAgIFsnc2FmYXJpJywgL1ZlcnNpb25cXC8oWzAtOVxcLl9dKykuKlNhZmFyaS9dLFxuICAgIFsnZmFjZWJvb2snLCAvRkJbQVNdVlxcLyhbMC05XFwuXSspL10sXG4gICAgWydpbnN0YWdyYW0nLCAvSW5zdGFncmFtXFxzKFswLTlcXC5dKykvXSxcbiAgICBbJ2lvcy13ZWJ2aWV3JywgL0FwcGxlV2ViS2l0XFwvKFswLTlcXC5dKykuKk1vYmlsZS9dLFxuICAgIFsnaW9zLXdlYnZpZXcnLCAvQXBwbGVXZWJLaXRcXC8oWzAtOVxcLl0rKS4qR2Vja29cXCkkL10sXG4gICAgWydjdXJsJywgL15jdXJsXFwvKFswLTlcXC5dKykkL10sXG4gICAgWydzZWFyY2hib3QnLCBTRUFSQ0hCT1hfVUFfUkVHRVhdLFxuXTtcbnZhciBvcGVyYXRpbmdTeXN0ZW1SdWxlcyA9IFtcbiAgICBbJ2lPUycsIC9pUChob25lfG9kfGFkKS9dLFxuICAgIFsnQW5kcm9pZCBPUycsIC9BbmRyb2lkL10sXG4gICAgWydCbGFja0JlcnJ5IE9TJywgL0JsYWNrQmVycnl8QkIxMC9dLFxuICAgIFsnV2luZG93cyBNb2JpbGUnLCAvSUVNb2JpbGUvXSxcbiAgICBbJ0FtYXpvbiBPUycsIC9LaW5kbGUvXSxcbiAgICBbJ1dpbmRvd3MgMy4xMScsIC9XaW4xNi9dLFxuICAgIFsnV2luZG93cyA5NScsIC8oV2luZG93cyA5NSl8KFdpbjk1KXwoV2luZG93c185NSkvXSxcbiAgICBbJ1dpbmRvd3MgOTgnLCAvKFdpbmRvd3MgOTgpfChXaW45OCkvXSxcbiAgICBbJ1dpbmRvd3MgMjAwMCcsIC8oV2luZG93cyBOVCA1LjApfChXaW5kb3dzIDIwMDApL10sXG4gICAgWydXaW5kb3dzIFhQJywgLyhXaW5kb3dzIE5UIDUuMSl8KFdpbmRvd3MgWFApL10sXG4gICAgWydXaW5kb3dzIFNlcnZlciAyMDAzJywgLyhXaW5kb3dzIE5UIDUuMikvXSxcbiAgICBbJ1dpbmRvd3MgVmlzdGEnLCAvKFdpbmRvd3MgTlQgNi4wKS9dLFxuICAgIFsnV2luZG93cyA3JywgLyhXaW5kb3dzIE5UIDYuMSkvXSxcbiAgICBbJ1dpbmRvd3MgOCcsIC8oV2luZG93cyBOVCA2LjIpL10sXG4gICAgWydXaW5kb3dzIDguMScsIC8oV2luZG93cyBOVCA2LjMpL10sXG4gICAgWydXaW5kb3dzIDEwJywgLyhXaW5kb3dzIE5UIDEwLjApL10sXG4gICAgWydXaW5kb3dzIE1FJywgL1dpbmRvd3MgTUUvXSxcbiAgICBbJ09wZW4gQlNEJywgL09wZW5CU0QvXSxcbiAgICBbJ1N1biBPUycsIC9TdW5PUy9dLFxuICAgIFsnQ2hyb21lIE9TJywgL0NyT1MvXSxcbiAgICBbJ0xpbnV4JywgLyhMaW51eCl8KFgxMSkvXSxcbiAgICBbJ01hYyBPUycsIC8oTWFjX1Bvd2VyUEMpfChNYWNpbnRvc2gpL10sXG4gICAgWydRTlgnLCAvUU5YL10sXG4gICAgWydCZU9TJywgL0JlT1MvXSxcbiAgICBbJ09TLzInLCAvT1NcXC8yL10sXG5dO1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdCh1c2VyQWdlbnQpIHtcbiAgICBpZiAoISF1c2VyQWdlbnQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlVXNlckFnZW50KHVzZXJBZ2VudCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVhY3ROYXRpdmVJbmZvKCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gcGFyc2VVc2VyQWdlbnQobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgfVxuICAgIHJldHVybiBnZXROb2RlVmVyc2lvbigpO1xufVxuZnVuY3Rpb24gbWF0Y2hVc2VyQWdlbnQodWEpIHtcbiAgICAvLyBvcHRlZCBmb3IgdXNpbmcgcmVkdWNlIGhlcmUgcmF0aGVyIHRoYW4gQXJyYXkjZmlyc3Qgd2l0aCBhIHJlZ2V4LnRlc3QgY2FsbFxuICAgIC8vIHRoaXMgaXMgcHJpbWFyaWx5IGJlY2F1c2UgdXNpbmcgdGhlIHJlZHVjZSB3ZSBvbmx5IHBlcmZvcm0gdGhlIHJlZ2V4XG4gICAgLy8gZXhlY3V0aW9uIG9uY2UgcmF0aGVyIHRoYW4gb25jZSBmb3IgdGhlIHRlc3QgYW5kIGZvciB0aGUgZXhlYyBhZ2FpbiBiZWxvd1xuICAgIC8vIHByb2JhYmx5IHNvbWV0aGluZyB0aGF0IG5lZWRzIHRvIGJlIGJlbmNobWFya2VkIHRob3VnaFxuICAgIHJldHVybiAodWEgIT09ICcnICYmXG4gICAgICAgIHVzZXJBZ2VudFJ1bGVzLnJlZHVjZShmdW5jdGlvbiAobWF0Y2hlZCwgX2EpIHtcbiAgICAgICAgICAgIHZhciBicm93c2VyID0gX2FbMF0sIHJlZ2V4ID0gX2FbMV07XG4gICAgICAgICAgICBpZiAobWF0Y2hlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHVhTWF0Y2ggPSByZWdleC5leGVjKHVhKTtcbiAgICAgICAgICAgIHJldHVybiAhIXVhTWF0Y2ggJiYgW2Jyb3dzZXIsIHVhTWF0Y2hdO1xuICAgICAgICB9LCBmYWxzZSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJyb3dzZXJOYW1lKHVhKSB7XG4gICAgdmFyIGRhdGEgPSBtYXRjaFVzZXJBZ2VudCh1YSk7XG4gICAgcmV0dXJuIGRhdGEgPyBkYXRhWzBdIDogbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVzZXJBZ2VudCh1YSkge1xuICAgIHZhciBtYXRjaGVkUnVsZSA9IG1hdGNoVXNlckFnZW50KHVhKTtcbiAgICBpZiAoIW1hdGNoZWRSdWxlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgbmFtZSA9IG1hdGNoZWRSdWxlWzBdLCBtYXRjaCA9IG1hdGNoZWRSdWxlWzFdO1xuICAgIGlmIChuYW1lID09PSAnc2VhcmNoYm90Jykge1xuICAgICAgICByZXR1cm4gbmV3IEJvdEluZm8oKTtcbiAgICB9XG4gICAgLy8gRG8gbm90IHVzZSBSZWdFeHAgZm9yIHNwbGl0IG9wZXJhdGlvbiBhcyBzb21lIGJyb3dzZXIgZG8gbm90IHN1cHBvcnQgaXQgKFNlZTogaHR0cDovL2Jsb2cuc3RldmVubGV2aXRoYW4uY29tL2FyY2hpdmVzL2Nyb3NzLWJyb3dzZXItc3BsaXQpXG4gICAgdmFyIHZlcnNpb25QYXJ0cyA9IG1hdGNoWzFdICYmIG1hdGNoWzFdLnNwbGl0KCcuJykuam9pbignXycpLnNwbGl0KCdfJykuc2xpY2UoMCwgMyk7XG4gICAgaWYgKHZlcnNpb25QYXJ0cykge1xuICAgICAgICBpZiAodmVyc2lvblBhcnRzLmxlbmd0aCA8IFJFUVVJUkVEX1ZFUlNJT05fUEFSVFMpIHtcbiAgICAgICAgICAgIHZlcnNpb25QYXJ0cyA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgdmVyc2lvblBhcnRzLCB0cnVlKSwgY3JlYXRlVmVyc2lvblBhcnRzKFJFUVVJUkVEX1ZFUlNJT05fUEFSVFMgLSB2ZXJzaW9uUGFydHMubGVuZ3RoKSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZlcnNpb25QYXJ0cyA9IFtdO1xuICAgIH1cbiAgICB2YXIgdmVyc2lvbiA9IHZlcnNpb25QYXJ0cy5qb2luKCcuJyk7XG4gICAgdmFyIG9zID0gZGV0ZWN0T1ModWEpO1xuICAgIHZhciBzZWFyY2hCb3RNYXRjaCA9IFNFQVJDSEJPVF9PU19SRUdFWC5leGVjKHVhKTtcbiAgICBpZiAoc2VhcmNoQm90TWF0Y2ggJiYgc2VhcmNoQm90TWF0Y2hbMV0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZWFyY2hCb3REZXZpY2VJbmZvKG5hbWUsIHZlcnNpb24sIG9zLCBzZWFyY2hCb3RNYXRjaFsxXSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQnJvd3NlckluZm8obmFtZSwgdmVyc2lvbiwgb3MpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdE9TKHVhKSB7XG4gICAgZm9yICh2YXIgaWkgPSAwLCBjb3VudCA9IG9wZXJhdGluZ1N5c3RlbVJ1bGVzLmxlbmd0aDsgaWkgPCBjb3VudDsgaWkrKykge1xuICAgICAgICB2YXIgX2EgPSBvcGVyYXRpbmdTeXN0ZW1SdWxlc1tpaV0sIG9zID0gX2FbMF0sIHJlZ2V4ID0gX2FbMV07XG4gICAgICAgIHZhciBtYXRjaCA9IHJlZ2V4LmV4ZWModWEpO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiBvcztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXROb2RlVmVyc2lvbigpIHtcbiAgICB2YXIgaXNOb2RlID0gdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MudmVyc2lvbjtcbiAgICByZXR1cm4gaXNOb2RlID8gbmV3IE5vZGVJbmZvKHByb2Nlc3MudmVyc2lvbi5zbGljZSgxKSkgOiBudWxsO1xufVxuZnVuY3Rpb24gY3JlYXRlVmVyc2lvblBhcnRzKGNvdW50KSB7XG4gICAgdmFyIG91dHB1dCA9IFtdO1xuICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBjb3VudDsgaWkrKykge1xuICAgICAgICBvdXRwdXQucHVzaCgnMCcpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuIiwiaW1wb3J0IHsgVGF0ZWdha2kgfSBmcm9tICcuL3RhdGVnYWtpJ1xuaW1wb3J0IHsgZGV0ZWN0IH0gZnJvbSAnZGV0ZWN0LWJyb3dzZXInXG5cbmNvbnN0IGJyb3dzZXIgPSBkZXRlY3QoKVxuaWYgKGJyb3dzZXIpIHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoYnJvd3Nlci5uYW1lKVxufVxuXG5sZXQga2FrdSA9IEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndGF0ZWdha2knKSlcbmtha3UuZm9yRWFjaChrID0+IHtcbiAgICBsZXQgdGF0ZWdha2kgPSBuZXcgVGF0ZWdha2koaylcblxuICAgIHRhdGVnYWtpLnBhcnNlKClcbn0pXG4iXSwibmFtZXMiOlsiU3RyaW5nRm9ybWF0R3VpZGUiLCJTdHJpbmciLCJwcm90b3R5cGUiLCJzZWdtZW50aXNlIiwicmUiLCJtYXRjaCIsInN0ciIsInRoaXMiLCJzZWdtZW50cyIsImluZGV4IiwiZXhlYyIsImZvcm1hdEd1aWRlIiwicHVzaCIsImNvbnRlbnQiLCJzdWJzdHJpbmciLCJhbWJpZ3VvdXMiLCJjamtQdW5jIiwiZnVsbHdpZHRoQWxwaGFiZXQiLCJsYXRpbiIsImthbmEiLCJsZW5ndGgiLCJUYXRlZ2FraSIsInJvb3RFbGVtZW50IiwiY29uZmlnIiwiY29uc3RydWN0b3IiLCJPYmplY3QiLCJhc3NpZ24iLCJzaG91bGRQY1MiLCJpbWl0YXRlUGNTIiwiaW1pdGF0ZVRyYW5zZnJvbVRvRnVsbFdpZHRoIiwic2hvdWxkUmVtb3ZlU3R5bGUiLCJwYXJzZSIsInJlbW92ZVN0eWxlIiwiY2xhc3NMaXN0IiwiYWRkIiwiZm9ybWF0IiwidGN5IiwiY29ycmVjdEFtYmlndW91cyIsInNldEVsZW1lbnRBdHRyaWJ1dGVzIiwiZWxlbWVudCIsInNlZ21lbnQiLCJpbm5lckhUTUwiLCJwb3N0UHJvY2VzcyIsInNldEF0dHJpYnV0ZSIsInNxdWVlemUiLCJ0ZXh0IiwicmVwbGFjZSIsIm5vZGUiLCJwYXNzVW50aWxQYXJhIiwibm9kZVR5cGUiLCJOb2RlIiwiVEVYVF9OT0RFIiwibm9kZVZhbHVlIiwidHJpbSIsImNvcnJlY3RQdW5jcyIsInBhcmVudEVsZW1lbnQiLCJjaGlsZEVsZW1lbnRDb3VudCIsImZvckVhY2giLCJzdWJFbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJUZXh0IiwiaW5zZXJ0QmVmb3JlIiwicmVtb3ZlQ2hpbGQiLCJub2RlTmFtZSIsImlzUGFyYSIsIkFycmF5IiwiZnJvbSIsImNoaWxkTm9kZXMiLCJjaGlsZE5vZGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjaGlsZHJlbiIsImNoaWxkIiwicHVuY3MiLCJzcGxpdCIsIm1hcCIsInB1bmMiLCJ0ZXN0IiwiaXNPcGVuaW5nQnJhY2tldCIsImNoYXJDb2RlQXQiLCJyZXN1bHQiLCJqb2luIiwidHJhbnNmcm9tVG9GdWxsV2lkdGgiLCJ4IiwiYmFzZSIsIm5ld0Jhc2UiLCJjdXJyZW50IiwiZnJvbUNoYXJDb2RlIiwiZG9jdW1lbnRFbGVtZW50IiwiZm9udFNpemVNYXRjaCIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJmb250U2l6ZSIsInBhcnNlSW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJjb250YWlucyIsIm5leHRFbGVtZW50U2libGluZyIsInJlbW92ZSIsIm1hdGNoZXMiLCJuZXdFbGVtZW50IiwiZGlnaXQiLCJyZXBsYWNlV2l0aCIsInRocmVzaG9sZCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImhlaWdodCIsIl9fc3ByZWFkQXJyYXkiLCJ0byIsInBhY2siLCJhcmd1bWVudHMiLCJhciIsImkiLCJsIiwic2xpY2UiLCJjYWxsIiwiY29uY2F0IiwiQnJvd3NlckluZm8iLCJuYW1lIiwidmVyc2lvbiIsIm9zIiwidHlwZSIsIlNlYXJjaEJvdERldmljZUluZm8iLCJib3QiLCJCb3RJbmZvIiwiU0VBUkNIQk9UX09TX1JFR0VYIiwidXNlckFnZW50UnVsZXMiLCJvcGVyYXRpbmdTeXN0ZW1SdWxlcyIsInBhcnNlVXNlckFnZW50IiwidWEiLCJtYXRjaGVkUnVsZSIsInJlZHVjZSIsIm1hdGNoZWQiLCJfYSIsImJyb3dzZXIiLCJyZWdleCIsInVhTWF0Y2giLCJtYXRjaFVzZXJBZ2VudCIsInZlcnNpb25QYXJ0cyIsImNvdW50Iiwib3V0cHV0IiwiaWkiLCJjcmVhdGVWZXJzaW9uUGFydHMiLCJkZXRlY3RPUyIsInNlYXJjaEJvdE1hdGNoIiwibmF2aWdhdG9yIiwicHJvZHVjdCIsInVzZXJBZ2VudCIsInByb2Nlc3MiLCJwbGF0Zm9ybSIsImJvZHkiLCJrIl0sInNvdXJjZVJvb3QiOiIifQ==